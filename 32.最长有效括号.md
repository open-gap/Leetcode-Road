# æœ€é•¿æœ‰æ•ˆæ‹¬å· #  
`éš¾åº¦ï¼šå›°éš¾` 
 
ç»™å®šä¸€ä¸ªåªåŒ…å« `'('` å’Œ `')'` çš„å­—ç¬¦ä¸²ï¼Œæ‰¾å‡ºæœ€é•¿çš„åŒ…å«æœ‰æ•ˆæ‹¬å·çš„å­ä¸²çš„é•¿åº¦ã€‚

**ç¤ºä¾‹1ï¼š**  
>**è¾“å…¥:** "(()"  
>**è¾“å‡º:** 2  
>**è§£é‡Š:** æœ€é•¿æœ‰æ•ˆæ‹¬å·å­ä¸²ä¸º "()"  

**ç¤ºä¾‹2ï¼š**  
>**è¾“å…¥:** ")()())"  
>**è¾“å‡º:** 4  
>**è§£é‡Š:** æœ€é•¿æœ‰æ•ˆæ‹¬å·å­ä¸²ä¸º "()()"  

æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰  
é“¾æ¥ï¼šhttps://leetcode-cn.com/problems/longest-valid-parentheses  
è‘—ä½œæƒå½’é¢†æ‰£ç½‘ç»œæ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»å®˜æ–¹æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚  

---  
>è§£æ³•ä¸€ï¼šæš´åŠ›æ³•  

é€šè¿‡ä¸¤æ¬¡å¾ªç¯éå†æ‰€æœ‰çš„å­—ç¬¦å­ä¸²ç»“æœ  
```C++
class Solution {
public:
    bool isParentheses(string s)
    {
        int temp = 0;
        for(auto i : s)
        {
            if(i ==  '(') ++temp;
            else --temp;
            if(temp < 0) return false;
        }
        return temp == 0;
    }

    int longestValidParentheses(string s) {
        int temp = 0, result = 0, length = s.length();
        if(length < 2) return result;
        else
        {
            for(int i = 0; i < length; ++i)
            {
                for(int j = 2; i + j - 1 < length; j += 2)
                {
                    if(isParentheses(s.substr(i, j)) && j > result) result = j;
                }
            }
            return result;
        }
    }
};
```  

**æ‰§è¡Œç»“æœï¼š**  
æ‰§è¡Œè¶…æ—¶ï¼Œæ— æ³•é€šè¿‡æ‰€æœ‰æµ‹è¯•æ ·ä¾‹  

---  
>è§£æ³•äºŒï¼šåŠ¨æ€è§„åˆ’æ–¹æ³•  

éå†è¾“å…¥å­—ç¬¦ä¸²ï¼Œè®°å½•æ¯æ¬¡é•¿åº¦å†…çš„æœ€é•¿æ‹¬å·ï¼Œåœ¨éå†ä¸‹ä¸€ä¸ªå­—ç¬¦æ—¶åˆ©ç”¨ä¹‹å‰ç»“æœé€’æ¨å½“å‰çš„æœ€é•¿æ‹¬å·
```C++
class Solution {
public:
    int longestValidParentheses(string s) {
        int temp = 0, result = 0, length = s.length();
        if(length < 2) return result;
        else
        {
            vector<int> vecList(length, 0);
            for(int i = 1; i < length; ++i)
            {
                if(s[i] == '(') continue;
                else if(s[i - 1] == '(')
                {
                    if(i > 1) vecList[i] = vecList[i - 2] + 2;
                    else vecList[i] = 2;
                }
                else if(i - 1 -vecList[i - 1] < 0) continue;
                else if(s[i - 1 - vecList[i - 1]] == '(')
                {
                    if(i - 1 - vecList[i - 1] > 0) vecList[i] = vecList[i - 2 - vecList[i - 1]] + vecList[i - 1] + 2;
                    else vecList[i] = vecList[i - 1] + 2;
                }

                if(vecList[i] > result) result = vecList[i];
            }
            return result;
        }
    }
};
```  

**æ‰§è¡Œç»“æœï¼š**  
æ‰§è¡Œç”¨æ—¶ : **8 ms** , åœ¨æ‰€æœ‰ cpp æäº¤ä¸­å‡»è´¥äº† **77.26%** çš„ç”¨æˆ·  
å†…å­˜æ¶ˆè€— : **9.5 MB** , åœ¨æ‰€æœ‰ cpp æäº¤ä¸­å‡»è´¥äº† **81.59%** çš„ç”¨æˆ·  

---  
>è§£æ³•ä¸‰ï¼šæ ˆ  

å€Ÿç”¨æ ˆçš„æ•°æ®ç»“æ„æ€§è´¨ï¼Œæ¯æ¬¡é‡åˆ° `'('` å°†å½“å‰ä¸‹æ ‡å‹æ ˆï¼Œç„¶ååœ¨é‡åˆ° `')'` æ—¶è®¡ç®—æœ€å¤§é•¿åº¦  
```C++
class Solution {
public:
    int longestValidParentheses(string s) {
        int temp = 0, result = 0, length = s.length();
        if(length < 2) return result;
        else
        {
            vector<int> heapList(length + 1, -1);
            int index = 1;
            for(int i = 0; i < length; ++i)
            {
                if(s[i] == '(') heapList[index++] = i;
                else if(index == 1) heapList[0] = i;
                else
                {
                    temp = i - heapList[--index - 1];
                    if(temp > result) result = temp;
                }
            }
            return result;
        }
    }
};
```  

**æ‰§è¡Œç»“æœï¼š**  
æ‰§è¡Œç”¨æ—¶ : **4 ms** , åœ¨æ‰€æœ‰ cpp æäº¤ä¸­å‡»è´¥äº† **96.76%** çš„ç”¨æˆ·  
å†…å­˜æ¶ˆè€— : **9.7 MB** , åœ¨æ‰€æœ‰ cpp æäº¤ä¸­å‡»è´¥äº† **76.80%** çš„ç”¨æˆ·  

---  
>è§£æ³•å››ï¼šä¸¤æ¬¡éå†æ³•  

åˆ†åˆ«ä»å·¦å¾€å³ğŸ‘‰å’Œä»å³å¾€å·¦ğŸ‘ˆä¸¤ä¸ªæ–¹å‘å…ˆåä¸¤æ¬¡éå†å­—ç¬¦ä¸²ï¼Œå¯¹æ¯”æŸ¥æ‰¾åˆ°çš„æœ€å¤§é•¿åº¦å³ä¸ºæ‰€æ±‚  
```C++
class Solution {
public:
    int longestValidParentheses(string s) {
        int temp = 0, result = 0, length = s.length();
        if(length < 2) return result;
        else
        {
            int left = 0, right = 0;
            // å…ˆä»å·¦å¾€å³æ‰«æ
            for(int i = 0; i < length; ++i)
            {
                if(s[i] == '(') ++left;
                else ++right;
                if(left == right)
                {
                    temp = left + right;
                    if(temp > result) result = temp;
                }
                else if(left < right)
                {
                    left = 0;
                    right = 0;
                }
            }
            left = 0;
            right = 0;
            // ç„¶åä»å³å¾€å·¦æ‰«æ
            for(int j = length - 1; j >= 0; --j)
            {
                if(s[j] == ')') ++right;
                else ++left;
                if(left == right)
                {
                    temp = left + right;
                    if(temp > result) result = temp;
                }
                else if(left > right)
                {
                    left = 0;
                    right = 0;
                }
            }
            return result;
        }
    }
};
```  

**æ‰§è¡Œç»“æœï¼š**  
æ‰§è¡Œç”¨æ—¶ : **8 ms** , åœ¨æ‰€æœ‰ cpp æäº¤ä¸­å‡»è´¥äº† **77.26%** çš„ç”¨æˆ·  
å†…å­˜æ¶ˆè€— : **9.2 MB** , åœ¨æ‰€æœ‰ cpp æäº¤ä¸­å‡»è´¥äº† **95.96%** çš„ç”¨æˆ·  

---  